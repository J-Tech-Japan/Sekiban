# requirement_definition.md

本ドキュメントは「会議室予約・設備・承認システム」における  
**業務ドメインとしての要求定義**をまとめたものです。

この文書の目的は、  
**実装・設計・リファクタリング時に「業務として何をしたかったのか」を立ち返って確認できること**  
であり、技術・アーキテクチャ・実装手段については一切触れません。

---

## 1. システムの目的

本システムの目的は、  
**社内における会議室利用を、現実的かつ秩序立てて運用すること**です。

単に「部屋の空きを管理する」ことではなく、

- 複数の利用条件
- 共有資源（設備）
- 人による判断（承認）
- 時間による制約（期限）

を含めて、  
**実務で「困らない」「揉めない」「後から説明できる」状態を作ること**が目的です。

---

## 2. 会議室予約という業務の前提

### 2.1 会議室は有限で共有される資源である

- 会議室は同じ時間帯に複数の利用者が使うことはできない
- 利用可能時間や用途には制約がある
- 特定の会議室は、特別な扱い（役員会議室など）を必要とする場合がある

### 2.2 予約は「仮」から「確定」へ進む

実務において、予約は次のような段階を持つ。

- とりあえず押さえたい（検討中）
- 条件が揃ったので使いたい
- 承認が必要なので待ちたい
- 最終的に確定した
- 条件が満たせず取り消した／期限切れになった

**予約は最初から確定するとは限らない**ことが重要な前提である。

---

## 3. 設備という業務要素

### 3.1 設備は会議室とは別の共有資源である

- プロジェクタ、マイク、スピーカー等は複数の会議室で共有される
- 会議室が空いていても、設備が足りなければ利用できない場合がある
- 設備には数量制限がある

### 3.2 設備は「予約と同時に考える必要がある」

- 設備を必要とする会議は、部屋と設備の両方が揃って初めて成立する
- 「部屋は確保できたが設備がなかった」という状態は業務上望ましくない
- 承認待ちの間も、設備を仮押さえしないと後で確保できなくなる可能性がある

---

## 4. 承認という業務判断

### 4.1 なぜ承認が必要か

承認は「誰かを困らせるため」ではなく、次の目的で存在する。

- 営業時間外利用など、例外的な利用を管理するため
- 社外者参加など、リスクや配慮が必要な会議を確認するため
- 高価な設備や特別な部屋の利用を適切に制御するため

### 4.2 承認は「特定の人」ではなく「役割」で行われる

- 承認は、個人ではなく**役割（例：総務、施設管理）**として行われる
- その役割を持つ誰が承認しても、業務的には同じ意味を持つ
- 承認者が休みでも業務が止まらないことが重要である

---

## 5. 承認待ちという状態の意味

### 5.1 承認待ちは「未確定だが、放置できない状態」

- 承認待ちの予約は、まだ確定していない
- しかし、承認される可能性があるため、部屋や設備を解放してしまうと困る
- そのため、一定時間は仮確保を維持する必要がある

### 5.2 承認には期限がある

- 承認は無期限に待つものではない
- 一定時間を超えた場合は、自動的に失効させる必要がある
- 失効した場合、仮確保していた資源は解放される

---

## 6. キャンセルと期限切れの扱い

### 6.1 キャンセルは「明示的な意思」

- 利用者や管理者が「使わない」と判断した結果
- 理由がある場合も、ない場合もある
- キャンセルされた予約は、以後利用できない

### 6.2 期限切れは「業務ルールによる終了」

- 仮確保期限切れ
- 承認期限切れ
- いずれも「人の意思」ではなく「ルール」による終了

### 6.3 終了時に残してはいけないもの

- 使われない予約が部屋を占有し続けること
- 使われない設備が確保されたままになること
- 承認待ちが永遠に残ること

---

## 7. 一貫性に関する業務要求

### 7.1 業務として許されない状態

次のような状態は、業務的に許容されない。

- 予約は確定しているが、設備が確保されていない
- 承認済みだが、予約側に反映されていない
- キャンセルされた予約が設備を占有し続けている
- 承認待ちが存在しないのに、予約が承認待ち状態になっている

### 7.2 業務上の考え方

- 会議は「成立するか」「成立しないか」のどちらかである
- 中途半端な状態は、業務トラブルの原因になる
- 後から説明できない状態は作ってはいけない

---

## 8. 履歴と説明責任

### 8.1 なぜ履歴が必要か

- 「なぜこの会議はキャンセルされたのか」
- 「誰が、いつ承認したのか」
- 「なぜこの時間帯は使えなかったのか」

これらに **後から答えられること**が重要である。

### 8.2 履歴は修正ではなく積み重ねである

- 過去の判断を消して書き換えるのではなく
- 判断の結果が積み重なって現在がある、という形が望ましい

---

## 9. 実装時に立ち返るための問い

実装や設計で迷ったときは、次の問いに立ち返る。

- この状態は、業務として意味があるか？
- この判断は、人が説明できるか？
- この予約は「成立している」と言えるか？
- この資源は、誰かのために正しく押さえられているか？
- このまま放置しても、現場は困らないか？

---

## 10. この要求定義の位置づけ

この文書は、

- 正解の実装を決めるものではない
- 技術的な制約を縛るものではない

代わりに、

> **「このシステムは、現場の何を守るために存在しているのか」**

を確認するための **業務の拠り所**です。

どのような技術を使っても、  
この要求に反する状態が生まれるなら、それは設計の再検討が必要です。